<html lang="en" class="lenis lenis-smooth">

<head></head>

<body class="selection:bg-emerald-500/30 selection:text-white">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIXUP ARENA | The Future of Competition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/geist-sans@5.0.1/300.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/geist-sans@5.0.1/400.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/geist-sans@5.0.1/500.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/geist-sans@5.0.1/600.min.css" rel="stylesheet">

    <style>
        :root {
            --cursor-size: 20px;
        }

        body {
            background-color: #050505;
            color: #ffffff;
            overflow-x: hidden;
            cursor: none;
            font-family: 'Geist Sans', sans-serif;
            margin: 0;
        }

        /* --- SMOOTH SCROLL --- */
        html {
            scroll-behavior: smooth;
        }

        ::selection {
            background: #10b981;
            color: #fff;
        }

        /* --- GLASS MORPHISM --- */
        html,
        body {
            overflow-y: auto !important;
            height: auto !important;
        }

        .glass-panel {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        /* Weather Tag */
        .weather-tag {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.6);
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 900;
            opacity: 0;
            transition: opacity 0.5s;
        }

        /* --- 3D CANVAS --- */
        #webgl {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
            opacity: 0;
            pointer-events: none;
            background: radial-gradient(circle at 50% 50%, #111115 0%, #000000 100%);
        }

        /* --- CUSTOM CURSOR --- */
        #cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 12px;
            height: 12px;
            border: 1px solid white;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s, background 0.3s;
            mix-blend-mode: difference;
        }

        #cursor.hovered {
            width: 40px;
            height: 40px;
            background: rgba(16, 185, 129, 0.2);
            border-color: #10b981;
        }

        /* --- TYPOGRAPHY FX --- */
        .reveal-text {
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
        }

        .char {
            display: inline-block;
            transform: translateY(110%);
            will-change: transform;
        }

        /* --- CAROUSEL (SPIRAL) --- */
        .carousel-container {
            position: relative;
            /* Height handled by GSAP Pinning */
        }

        .carousel-viewport {
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            perspective: 2000px;
        }

        .carousel-world {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            will-change: transform;
        }

        .carousel-card {
            position: absolute;
            left: 50%;
            top: 50%;
            width: 320px;
            height: 220px;
            margin-left: -160px;
            margin-top: -110px;
            transform-style: preserve-3d;
            backface-visibility: hidden;
            opacity: 0;
            /* Start hidden */
        }

        /* --- LOADER --- */
        .loader-wrap {
            position: fixed;
            z-index: 10000;
            inset: 0;
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .loader-bar {
            width: 1px;
            height: 0%;
            background: #10b981;
            margin-bottom: 20px;
        }

        /* --- MARQUEE --- */
        .marquee-container {
            mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
            overflow: hidden;
            white-space: nowrap;
        }

        .marquee-content {
            display: inline-flex;
            animation: scroll 30s linear infinite;
        }

        .marquee-item {
            padding-right: 4rem;
        }

        @keyframes scroll {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }
    </style>

    <!-- Cursor -->
    <div id="cursor"></div>

    <!-- Weather Tag -->
    <div class="weather-tag" id="weatherDisplay">
        <iconify-icon icon="carbon:location"></iconify-icon>
        <span id="weatherText">Locating...</span>
    </div>

    <!-- 3D Background -->
    <canvas id="webgl"></canvas>

    <!-- Loader -->
    <div class="loader-wrap">
        <div class="loader-bar"></div>
        <div class="flex gap-2 text-xs font-medium tracking-widest text-white uppercase">
            <span class="stadium-name-loader">LOADING</span>
            <span class="counter">0</span>%
        </div>
    </div>

    <!-- Nav -->
    <nav class="fixed top-0 left-0 w-full z-[100] flex justify-center pt-6 px-4 pointer-events-none">
        <div
            class="pointer-events-auto bg-black/80 backdrop-blur-xl border border-white/10 rounded-full px-6 h-16 flex items-center justify-between shadow-2xl min-w-[320px] md:min-w-[500px]">
            <a href="#founders"
                class="nav-link text-[11px] font-medium text-zinc-400 hover:text-white transition-colors uppercase tracking-widest hover-trigger">Contact</a>
            <a href="#"
                class="nav-link flex flex-col items-center justify-center group px-8 border-x border-white/10 h-full mx-6 hover-trigger">
                <div class="flex items-center gap-2">
                    <iconify-icon icon="lucide:trophy"
                        class="text-emerald-400 text-lg group-hover:rotate-12 transition-transform"></iconify-icon>
                    <span class="text-sm font-bold text-white tracking-tighter">FIXUP ARENA</span>
                </div>
            </a>
            <a href="#register"
                class="nav-link text-[11px] font-medium text-emerald-400 hover:text-emerald-300 transition-colors uppercase tracking-widest flex items-center gap-1 hover-trigger">
                Invest <iconify-icon icon="lucide:arrow-up-right"></iconify-icon>
            </a>
        </div>
    </nav>

    <!-- Hero -->
    <header class="h-screen relative flex items-center justify-center px-4 overflow-hidden">
        <div class="z-10 text-center flex flex-col items-center max-w-4xl mx-auto mt-12">

            <div class="mb-8 overflow-hidden">
                <div
                    class="hero-tag opacity-0 text-[10px] uppercase flex gap-2 font-medium text-amber-400 tracking-widest bg-amber-950/40 border border-amber-500/30 rounded-full px-4 py-1.5 backdrop-blur-md translate-y-full items-center shadow-lg shadow-amber-900/20">
                    <span class="w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"></span>
                    Project Status: Seeking Investment
                </div>
            </div>

            <h1
                class="font-display text-5xl md:text-8xl lg:text-9xl font-semibold leading-[0.9] tracking-tighter text-white text-center mb-8 mix-blend-overlay">
                <div class="reveal-text"><span class="char">The Future of</span></div>
                <div class="reveal-text"><span
                        class="char text-transparent bg-clip-text bg-gradient-to-b from-white to-zinc-400">Competition.</span>
                </div>
            </h1>

            <div class="max-w-xl text-center">
                <p
                    class="hero-desc opacity-0 text-sm md:text-base text-zinc-300 font-light leading-relaxed mix-blend-plus-lighter">
                    The world’s first central hub for all sports tournaments. We connect players, teams, and leagues
                    through intelligent automation.
                </p>
            </div>

            <div class="hero-desc opacity-0 mt-10">
                <button
                    class="hover-trigger px-8 py-3 bg-white text-black text-xs font-semibold uppercase tracking-wider rounded-lg hover:bg-zinc-200 transition-all shadow-[0_0_30px_rgba(255,255,255,0.2)] hover:scale-105">
                    Register Interest
                </button>
            </div>
        </div>

        <div class="absolute bottom-10 right-10 hidden md:block z-10">
            <div
                class="flex items-center gap-3 bg-black/60 backdrop-blur border border-white/10 rounded-full px-4 py-2 shadow-xl">
                <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                <div class="text-[10px] uppercase font-medium text-zinc-300 tracking-widest">
                    <span class="text-zinc-500 mr-2">Loc:</span>
                    <span id="stadium-label" class="text-white">...</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Marquee -->
    <section class="py-6 border-y border-white/5 bg-black/40 backdrop-blur-md marquee-container relative z-20">
        <div class="marquee-content">
            <!-- Set 1 -->
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-500 flex items-center gap-8">GRASSROOTS
                    REVOLUTION <iconify-icon icon="lucide:star" class="text-emerald-500"></iconify-icon></span></div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-300 flex items-center gap-8">LEAGUE
                    MANAGEMENT <iconify-icon icon="lucide:layout-grid" class="text-emerald-500"></iconify-icon></span>
            </div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-500 flex items-center gap-8">ADVANCED
                    STATISTICS <iconify-icon icon="lucide:bar-chart-2" class="text-emerald-500"></iconify-icon></span>
            </div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-300 flex items-center gap-8">GLOBAL
                    RANKINGS <iconify-icon icon="lucide:globe" class="text-emerald-500"></iconify-icon></span></div>
            <!-- Set 2 -->
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-500 flex items-center gap-8">GRASSROOTS
                    REVOLUTION <iconify-icon icon="lucide:star" class="text-emerald-500"></iconify-icon></span></div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-300 flex items-center gap-8">LEAGUE
                    MANAGEMENT <iconify-icon icon="lucide:layout-grid" class="text-emerald-500"></iconify-icon></span>
            </div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-500 flex items-center gap-8">ADVANCED
                    STATISTICS <iconify-icon icon="lucide:bar-chart-2" class="text-emerald-500"></iconify-icon></span>
            </div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-300 flex items-center gap-8">GLOBAL
                    RANKINGS <iconify-icon icon="lucide:globe" class="text-emerald-500"></iconify-icon></span></div>
        </div>
    </section>

    <!-- Problem -->
    <section id="problem" class="relative py-32 px-4 z-10 bg-black/20">
        <div class="max-w-[1200px] mx-auto glass-panel p-8 md:p-12 lg:p-16 relative overflow-hidden">
            <div class="absolute -top-40 -right-40 w-80 h-80 bg-emerald-500/10 rounded-full blur-[100px]"></div>

            <div class="flex items-end justify-between mb-16 border-b border-white/5 pb-8 relative z-10">
                <h2 class="text-3xl md:text-5xl font-semibold tracking-tight text-white">PROBLEM STATEMENT</h2>
                <div class="text-right hidden md:block">
                    <p class="text-zinc-500 text-xs uppercase tracking-widest">Fragmented Scene.<br>Untapped Potential.
                    </p>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-12 relative z-10">
                <div class="space-y-12">
                    <div class="group">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-1.5 h-1.5 bg-red-500 rounded-full"></span>
                            <span class="text-[10px] font-bold text-red-500 uppercase tracking-widest">Current
                                State</span>
                        </div>
                        <h3 class="text-2xl font-medium text-white mb-4">Fragmented Ecosystem</h3>
                        <p class="text-zinc-400 font-light leading-relaxed text-sm md:text-base">
                            The amateur world is scattered. Dozens of small tournaments operate in silos with no central
                            system, no standardisation, and no digital bridge.
                        </p>
                    </div>
                    <div class="group">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-1.5 h-1.5 bg-amber-500 rounded-full"></span>
                            <span class="text-[10px] font-bold text-amber-500 uppercase tracking-widest">Lost
                                Value</span>
                        </div>
                        <h3 class="text-2xl font-medium text-white mb-4">No Stage, No Reward</h3>
                        <p class="text-zinc-400 font-light leading-relaxed text-sm md:text-base">
                            Even the best grassroots players rarely earn from their craft. They pour hours into training
                            but lack the infrastructure to turn skill into income.
                        </p>
                    </div>
                </div>

                <div
                    class="relative min-h-[400px] bg-black/50 rounded-xl overflow-hidden border border-white/5 flex items-center justify-center">
                    <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20">
                    </div>
                    <div class="relative w-full h-full p-8 flex items-center justify-center">
                        <div class="grid grid-cols-2 gap-4 w-64">
                            <div
                                class="h-24 border border-zinc-700 rounded-lg flex items-center justify-center bg-zinc-900/50 backdrop-blur">
                                <iconify-icon icon="lucide:x" class="text-red-500/50 text-2xl"></iconify-icon>
                            </div>
                            <div
                                class="h-24 border border-zinc-700 rounded-lg flex items-center justify-center bg-zinc-900/50 backdrop-blur">
                                <iconify-icon icon="lucide:x" class="text-red-500/50 text-2xl"></iconify-icon>
                            </div>
                            <div
                                class="h-24 border border-zinc-700 rounded-lg flex items-center justify-center bg-zinc-900/50 backdrop-blur">
                                <iconify-icon icon="lucide:x" class="text-red-500/50 text-2xl"></iconify-icon>
                            </div>
                            <div
                                class="h-24 border border-zinc-700 rounded-lg flex items-center justify-center bg-zinc-900/50 backdrop-blur">
                                <iconify-icon icon="lucide:x" class="text-red-500/50 text-2xl"></iconify-icon>
                            </div>
                        </div>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div
                                class="text-[10px] bg-red-500/10 text-red-400 px-3 py-1 rounded-full border border-red-500/20 backdrop-blur-md uppercase tracking-widest font-bold">
                                Disconnect</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Roadmap (Spiral) -->
    <section id="roadmap" class="carousel-container z-20">
        <div class="carousel-viewport bg-black/10">
            <div class="absolute top-24 left-0 w-full text-center z-20 pointer-events-none">
                <div class="inline-block bg-black/50 backdrop-blur px-6 py-2 rounded-full border border-white/10">
                    <h2 class="text-2xl font-semibold text-white tracking-tight">ROADMAP</h2>
                </div>
            </div>

            <div class="carousel-world" id="carouselWorld">
                <!-- Cards arranged in a downward spiral -->

                <div class="carousel-card glass-panel p-6 flex flex-col justify-center border-l-4 border-emerald-500"
                    data-color="#10b981">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-emerald-500 text-[10px] font-bold tracking-widest uppercase">Q2 2026</span>
                        <iconify-icon icon="lucide:flag" class="text-zinc-500"></iconify-icon>
                    </div>
                    <h3 class="text-xl font-medium text-white mb-2">The Setup</h3>
                    <p class="text-zinc-400 font-light text-xs leading-relaxed">Partnerships secured. AI algorithms
                        finalized.</p>
                </div>

                <div class="carousel-card glass-panel p-6 flex flex-col justify-center border-l-4 border-blue-500"
                    data-color="#3b82f6">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-blue-500 text-[10px] font-bold tracking-widest uppercase">Q3 2026</span>
                        <iconify-icon icon="lucide:smartphone" class="text-zinc-500"></iconify-icon>
                    </div>
                    <h3 class="text-xl font-medium text-white mb-2">App Development</h3>
                    <p class="text-zinc-400 font-light text-xs leading-relaxed">MVP build. Players create profiles and
                        join waitlists.</p>
                </div>

                <div class="carousel-card glass-panel p-6 flex flex-col justify-center border-l-4 border-white bg-zinc-900"
                    data-color="#ffffff">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-white text-[10px] font-bold tracking-widest uppercase">Late 2026</span>
                        <iconify-icon icon="lucide:rocket" class="text-white"></iconify-icon>
                    </div>
                    <h3 class="text-xl font-medium text-white mb-2">UK Launch</h3>
                    <p class="text-zinc-400 font-light text-xs leading-relaxed">Official launch. £15k prize pool. Live
                        streaming.</p>
                </div>

                <div class="carousel-card glass-panel p-6 flex flex-col justify-center border-l-4 border-amber-500"
                    data-color="#f59e0b">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-amber-500 text-[10px] font-bold tracking-widest uppercase">Q1 2027</span>
                        <iconify-icon icon="lucide:map" class="text-zinc-500"></iconify-icon>
                    </div>
                    <h3 class="text-xl font-medium text-white mb-2">Expansion</h3>
                    <p class="text-zinc-400 font-light text-xs leading-relaxed">7-a-side leagues with
                        promotion/relegation systems.</p>
                </div>

                <div class="carousel-card glass-panel p-6 flex flex-col justify-center border-l-4 border-purple-500"
                    data-color="#a855f7">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-purple-500 text-[10px] font-bold tracking-widest uppercase">Q3 2027</span>
                        <iconify-icon icon="lucide:globe-2" class="text-zinc-500"></iconify-icon>
                    </div>
                    <h3 class="text-xl font-medium text-white mb-2">Global Sport</h3>
                    <p class="text-zinc-400 font-light text-xs leading-relaxed">Basketball and Tennis integration.</p>
                </div>
            </div>
        </div>
    </section>

    <div class="h-[10vh]"></div>

    <!-- Founders -->
    <section id="founders" class="py-32 px-4 relative z-10 bg-black">
        <div class="max-w-[1200px] mx-auto glass-panel p-8 md:p-16 border-t border-white/10">
            <h2 class="text-3xl font-semibold text-white tracking-tight text-center mb-16" style="">FOUNDERS</h2>

            <div class="grid md:grid-cols-2 gap-8">
                <!-- Founder 1 -->
                <div
                    class="p-8 rounded-2xl bg-zinc-900/50 border border-white/5 hover:bg-zinc-800/50 transition-colors group hover-trigger">
                    <div class="flex items-center gap-4 mb-6">
                        <div
                            class="w-14 h-14 bg-gradient-to-br from-zinc-700 to-black rounded-full flex items-center justify-center border border-white/10 shadow-lg">
                            <span class="text-white font-bold text-lg">HK</span>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-white group-hover:text-emerald-400 transition-colors">
                                Hassan Kone</h3>
                            <p class="text-zinc-500 text-[10px] font-bold uppercase tracking-wider">Co-Founder &amp; CMO
                            </p>
                        </div>
                    </div>
                    <ul class="space-y-3">
                        <li class="flex items-start gap-3 text-sm text-zinc-400 font-light">
                            <iconify-icon icon="lucide:check-circle-2"
                                class="text-emerald-500 mt-0.5 text-base"></iconify-icon>
                            Sports Content Creator (500k+ followers)
                        </li>
                        <li class="flex items-start gap-3 text-sm text-zinc-400 font-light">
                            <iconify-icon icon="lucide:check-circle-2"
                                class="text-emerald-500 mt-0.5 text-base"></iconify-icon>
                            Marketing Lead experience at Accenture
                        </li>
                    </ul>
                </div>

                <!-- Founder 2 -->
                <div
                    class="p-8 rounded-2xl bg-zinc-900/50 border border-white/5 hover:bg-zinc-800/50 transition-colors group hover-trigger">
                    <div class="flex items-center gap-4 mb-6">
                        <div
                            class="w-14 h-14 bg-gradient-to-br from-zinc-700 to-black rounded-full flex items-center justify-center border border-white/10 shadow-lg">
                            <span class="text-white font-bold text-lg">PK</span>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-white group-hover:text-emerald-400 transition-colors">
                                Praveet Khambhaita</h3>
                            <p class="text-zinc-500 text-[10px] font-bold uppercase tracking-wider">Co-Founder &amp; CTO
                            </p>
                        </div>
                    </div>
                    <ul class="space-y-3">
                        <li class="flex items-start gap-3 text-sm text-zinc-400 font-light">
                            <iconify-icon icon="lucide:check-circle-2"
                                class="text-emerald-500 mt-0.5 text-base"></iconify-icon>
                            AI Lead experience at Accenture
                        </li>
                        <li class="flex items-start gap-3 text-sm text-zinc-400 font-light">
                            <iconify-icon icon="lucide:check-circle-2"
                                class="text-emerald-500 mt-0.5 text-base"></iconify-icon>
                            Building GenAI copilots (30–60% efficiency)
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black pt-20 pb-12 px-6 border-t border-white/10 relative z-20">
        <div class="max-w-[1400px] mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-start gap-12 mb-12">
                <div>
                    <div class="flex items-center gap-2 mb-4">
                        <iconify-icon icon="lucide:trophy" class="text-emerald-500 text-xl"></iconify-icon>
                        <span class="text-xl font-bold tracking-tight text-white">FIXUP ARENA</span>
                    </div>
                    <p class="text-zinc-500 text-sm max-w-xs font-light">
                        Democratising sports competition through AI-driven league management.
                    </p>
                </div>

                <div>
                    <h4 class="text-white text-xs font-bold uppercase tracking-widest mb-4">Company</h4>
                    <ul class="space-y-2 text-sm text-zinc-500">
                        <li><a href="#" class="hover:text-emerald-400 transition-colors">About</a></li>
                        <li><a href="#" class="hover:text-emerald-400 transition-colors">Founders</a></li>

                    </ul>
                </div>
            </div>

            <div class="pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="text-[10px] text-zinc-600 uppercase tracking-wider">
                    © 2026 FixUp Arena Ltd. All Rights Reserved.
                </div>
                <div class="flex gap-4">
                    <a href="#" class="text-zinc-600 hover:text-white transition-colors"><iconify-icon
                            icon="lucide:twitter"></iconify-icon></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // --- 5. DATA & CONFIG ---
        const stadiums = {
            wembley: {
                name: "Wembley Stadium",
                city: "London",
                color: { r: 1, g: 0.2, b: 0.2 },
                arch: true,
                coords: { lat: 51.5560, lon: -0.2795 },
                type: "oval",
                seats: 50000
            },
            etihad: {
                name: "Etihad Stadium",
                city: "Manchester",
                color: { r: 0.4, g: 0.8, b: 1 },
                coords: { lat: 53.4831, lon: -2.2004 },
                type: "bowl",
                seats: 45000
            },
            emirates: {
                name: "Emirates Stadium",
                city: "London",
                color: { r: 0.9, g: 0.1, b: 0.1 },
                coords: { lat: 51.5549, lon: -0.1084 },
                type: "bowl-curved",
                seats: 48000
            },
            oldtrafford: {
                name: "Old Trafford",
                city: "Manchester",
                color: { r: 0.9, g: 0.9, b: 0.9 },
                coords: { lat: 53.4631, lon: -2.2913 },
                type: "rect-steep",
                seats: 55000
            },
            anfield: {
                name: "Anfield",
                city: "Liverpool",
                color: { r: 0.8, g: 0.1, b: 0.1 },
                coords: { lat: 53.4308, lon: -2.9608 },
                type: "rect-kop",
                seats: 45000
            }
        };

        const stadiumKeys = Object.keys(stadiums);
        const currentKey = stadiumKeys[Math.floor(Math.random() * stadiumKeys.length)];
        let currentStadium = stadiums[currentKey];
        let weatherData = { condition: 'Clear', temp: 15, code: 0 }; // Default

        document.getElementById('stadium-label').textContent = currentStadium.name;
        document.querySelector('.stadium-name-loader').textContent = currentStadium.name.toUpperCase();

        // --- 2. CUSTOM CURSOR ---
        const cursor = document.getElementById('cursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });
        document.querySelectorAll('.hover-trigger, a, button').forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
        });

        // --- 4. THREE.JS ENGINE ---
        const canvas = document.querySelector('#webgl');
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(new THREE.Color('#000000'), 0.0015);

        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 8000);
        const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: false, powerPreference: "high-performance" });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        // GROUPS
        const stadiumGroup = new THREE.Group();
        const helixGroup = new THREE.Group();
        const weatherGroup = new THREE.Group(); // New group for weather particles
        scene.add(stadiumGroup);
        scene.add(helixGroup);
        scene.add(weatherGroup); // Add weather group to scene
        helixGroup.visible = false;

        // --- 6. WEATHER SYSTEM ---
        let cloudsPoints, rainPoints;

        async function fetchWeather(lat, lon) {
            try {
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=weather_code,temperature_2m`;
                const res = await fetch(url);
                const data = await res.json();

                const code = data.current.weather_code;
                const temp = data.current.temperature_2m;

                // Map WMO codes
                let type = 'Clear'; // 0
                if (code >= 1 && code <= 3) type = 'Cloudy';
                if (code >= 51 && code <= 67) type = 'Rain';
                if (code >= 71 && code <= 77) type = 'Snow';
                if (code >= 80 && code <= 82) type = 'Rain';
                if (code >= 85 && code <= 86) type = 'Snow';
                if (code >= 95) type = 'Storm';

                return { type, temp, code };
            } catch (e) {
                console.error("Weather fetch failed", e);
                return { type: 'Clear', temp: 15, code: 0 };
            }
        }

        function buildWeather(type) {
            // clear old
            while (weatherGroup.children.length > 0) {
                const obj = weatherGroup.children[0];
                obj.geometry.dispose();
                obj.material.dispose();
                weatherGroup.remove(obj);
            }

            // 1. CLOUDS (Clustered & Dense)
            // Goal: "Small cloud-shaped chunks"
            const isClear = type === 'Clear';

            // Config
            const clusterCount = isClear ? 8 : 30; // More clumps
            const particlesPerCluster = isClear ? 300 : 1200; // Denser (Total ~36k)
            const clusterRadius = 300; // Size of a single cloud clump

            const cloudGeo = new THREE.BufferGeometry();
            const cloudPos = [];
            const cloudSizes = [];

            for (let c = 0; c < clusterCount; c++) {
                // Random center for this cloud clump
                const cx = (Math.random() - 0.5) * 3500;
                const cz = (Math.random() - 0.5) * 3500;
                // Lower Altitude: 80 to 330 (Visible right above stadium)
                const cy = 80 + Math.random() * 250;

                for (let p = 0; p < particlesPerCluster; p++) {
                    // Gaussian-like distribution around center
                    // (Math.random() + Math.random() + Math.random() - 1.5) produces a bell curve approx
                    const dx = (Math.random() - 0.5) * clusterRadius;
                    const dy = (Math.random() - 0.5) * (clusterRadius * 0.4); // Flatter clouds
                    const dz = (Math.random() - 0.5) * clusterRadius;

                    cloudPos.push(cx + dx, cy + dy, cz + dz);

                    // Specific requested size: "Much smaller particle size"
                    cloudSizes.push(Math.random() * 4 + 3); // 3 to 7
                }
            }
            cloudGeo.setAttribute('position', new THREE.Float32BufferAttribute(cloudPos, 3));
            cloudGeo.setAttribute('size', new THREE.Float32BufferAttribute(cloudSizes, 1));

            // Dense Material
            const cloudMat = new THREE.PointsMaterial({
                size: 1, // Scaled by attribute
                vertexColors: false,
                sizeAttenuation: true,
                transparent: true,
                opacity: 0.15, // Low opacity for stacking effect
                blending: THREE.NormalBlending,
                depthWrite: false,
                fog: false
            });
            cloudMat.color = new THREE.Color(type === 'Rain' || type === 'Storm' ? '#888888' : '#ffffff');

            cloudsPoints = new THREE.Points(cloudGeo, cloudMat);
            weatherGroup.add(cloudsPoints);

            // 2. PRECIPITATION
            if (type === 'Rain' || type === 'Snow' || type === 'Storm') {
                const precipCount = type === 'Storm' ? 15000 : 8000;
                const precipGeo = new THREE.BufferGeometry();
                const precipPos = [];

                for (let i = 0; i < precipCount; i++) {
                    const x = (Math.random() - 0.5) * 1500;
                    const z = (Math.random() - 0.5) * 1500;
                    const y = Math.random() * 600;
                    precipPos.push(x, y, z);
                }

                precipGeo.setAttribute('position', new THREE.Float32BufferAttribute(precipPos, 3));
                const precipMat = cloudMat.clone();
                precipMat.color = new THREE.Color(type === 'Snow' ? '#ffffff' : '#aaddff');
                precipMat.size = type === 'Snow' ? 1.5 : 0.8;
                precipMat.opacity = 0.6;

                // Store type for animation
                precipGeo.userData = { type: type === 'Snow' ? 'snow' : 'rain' };

                rainPoints = new THREE.Points(precipGeo, precipMat);
                weatherGroup.add(rainPoints);
            }

            // UI Update
            const ui = document.getElementById('weatherDisplay');
            const text = document.getElementById('weatherText');
            if (ui && text) {
                ui.style.opacity = 1;

                let icon = 'carbon:sun';
                if (type === 'Cloudy') icon = 'carbon:cloud';
                if (type === 'Rain') icon = 'carbon:rain';
                if (type === 'Snow') icon = 'carbon:snow';
                if (type === 'Storm') icon = 'carbon:lightning';

                text.innerHTML = `LOC: ${currentStadium.city.toUpperCase()} | <iconify-icon icon="${icon}" style="vertical-align: middle;"></iconify-icon> ${Math.round(weatherData.temp)}°C ${type.toUpperCase()}`;
            }
        }

        // --- PARTICLE GENERATION: HIGH FIDELITY STADIUM ---
        // --- PARTICLE GENERATION: HIGH FIDELITY STADIUM ---
        const stadiumGeo = new THREE.BufferGeometry();

        // GLOBAL MATERIAL
        const material = new THREE.PointsMaterial({
            size: 0.5, vertexColors: true, sizeAttenuation: true,
            transparent: true, opacity: 0.9, blending: THREE.AdditiveBlending, depthWrite: false
        });

        const updateStadium = async () => {
            // Fetch Weather First
            if (currentStadium.coords) {
                weatherData = await fetchWeather(currentStadium.coords.lat, currentStadium.coords.lon);
                buildWeather(weatherData.type);
            }

            const positions = [];
            const colors = [];
            const sizes = [];

            const addP = (x, y, z, c, s = 1) => {
                // Jitter for realism
                positions.push(x + (Math.random() - 0.5), y + (Math.random() - 0.5), z + (Math.random() - 0.5));
                colors.push(c.r, c.g, c.b);
                sizes.push(s);
            }

            const colPrim = new THREE.Color(currentStadium.colorPrimary);
            const colSec = new THREE.Color(currentStadium.colorSecondary);
            const colConcrete = new THREE.Color('#333');
            const colPitchDark = new THREE.Color('#064e3b');
            const colPitchLight = new THREE.Color('#10b981');
            const colWhite = new THREE.Color('#ffffff');
            const colGrey = new THREE.Color('#444444');
            const colDarkGrey = new THREE.Color('#222222');

            // A. PITCH (Higher density 30k)
            const pw = 48, pl = 72;
            for (let i = 0; i < 30000; i++) {
                const x = (Math.random() - 0.5) * pw * 2;
                const z = (Math.random() - 0.5) * pl * 2;

                if (currentStadium.type.includes('oval') && (x * x / (pw * pw) + z * z / (pl * pl) > 1.2)) continue;

                const stripe = Math.floor((z + pl) / 10) % 2 === 0;
                const c = stripe ? colPitchDark : colPitchLight;
                c.offsetHSL(0, 0, (Math.random() - 0.5) * 0.08);

                addP(x, 0, z, c, 0.5);

                // Crisp White Lines
                const isLine = Math.abs(x) > pw - 1 || Math.abs(z) > pl - 1 || Math.abs(z) < 0.3 || (x * x + z * z < 100 && x * x + z * z > 85);
                if (isLine) addP(x, 0.1, z, colWhite, 0.8);
            }

            // B. STANDS & ARCHITECTURE
            const tiers = 85;
            const seatsPerTier = 1000;

            for (let t = 0; t < tiers; t++) {
                let y, spread;

                // Wembley Specific Tiering (Realistic 3 Tiers)
                if (currentStadium.name === 'Wembley') {
                    // Tier 1 (Lower)
                    if (t < 35) {
                        y = t * 1.5;
                        spread = t * 1.5;
                    }
                    // Tier 2 (Club Wembley - recessed and smaller)
                    else if (t >= 35 && t < 45) {
                        y = t * 1.5 + 5;
                        spread = t * 1.8 + 5;
                    }
                    // Tier 3 (Upper - high and steep)
                    else {
                        y = t * 1.8 + 15;
                        spread = t * 2.2 + 8;
                    }
                } else {
                    if (t < 30) { y = t * 1.5; spread = t * 1.8; }
                    else { y = (t * 1.8) + 10; spread = t * 2.2; }
                }

                for (let i = 0; i < seatsPerTier; i++) {
                    const angle = (i / seatsPerTier) * Math.PI * 2;
                    let x, z, valid = true;

                    if (currentStadium.type === 'rect-steep') {
                        const w = pw + 12 + spread;
                        const l = pl + 12 + spread;
                        x = Math.pow(Math.abs(Math.cos(angle)), 0.3) * w * Math.sign(Math.cos(angle));
                        z = Math.pow(Math.abs(Math.sin(angle)), 0.3) * l * Math.sign(Math.sin(angle));
                        if (Math.abs(Math.sin(angle * 2)) > 0.9 && t > 20) valid = false;
                    } else if (currentStadium.type === 'rect-kop') {
                        const w = pw + 10 + spread;
                        const l = pl + 10 + spread;
                        x = Math.cos(angle) * w;
                        z = Math.sin(angle) * l;
                        if (Math.abs(Math.cos(angle)) > 0.5) x *= 1.2;
                        if (Math.abs(Math.sin(angle)) > 0.5) z *= 1.2;
                        if (z > pl + 20 && t > 40) y += (z - (pl + 20)) * 0.5;
                    } else if (currentStadium.type === 'bowl-curved') {
                        const w = pw + 15 + spread;
                        const l = pl + 15 + spread;
                        x = Math.cos(angle) * w;
                        z = Math.sin(angle) * l;
                        y = t * 1.2 + Math.sin(angle * 2) * 5;
                    } else {
                        // Oval (Wembley)
                        const w = pw + 15 + spread;
                        const l = pl + 15 + spread * 1.1; // Slightly longer oval
                        x = Math.cos(angle) * w;
                        z = Math.sin(angle) * l;
                    }

                    if (!valid) continue;

                    let c = colPrim;
                    if (Math.random() > 0.8) c = colSec;
                    if (i % 50 === 0 || t % 40 === 0) c = colConcrete;

                    addP(x, y + Math.random() * 0.5, z, c, 1.2);
                }
            }

            // C. ROOF 
            const roofHeight = currentStadium.name === 'Wembley' ? 180 : 160;
            const roofW = pw + 140;
            const roofL = pl + 160;

            for (let i = 0; i < 4000; i++) {
                const angle = (i / 4000) * Math.PI * 2;
                const x = Math.cos(angle) * roofW;
                const z = Math.sin(angle) * roofL;

                // Ring
                addP(x, roofHeight, z, colWhite, 2);

                // Trusses
                if (i % 80 === 0) {
                    for (let k = 0; k < 25; k++) {
                        const ty = roofHeight - (k * (roofHeight / 25));
                        const tx = x * (0.85 + k * 0.006);
                        const tz = z * (0.85 + k * 0.006);
                        addP(tx, ty, tz, colConcrete, 0.8);
                    }
                }
            }

            // D. REALISTIC WEMBLEY ARCH (TRUSS STRUCTURE)
            if (currentStadium.arch) {
                const archSpan = pl * 6.5; // Wider span
                const archHeight = 320; // Massive height
                const tiltAngle = 0.35; // Leaning back

                // Generate Truss Arch (High Fidelity & Tapered)
                const archPoints = 8000;
                for (let i = 0; i < archPoints; i++) {
                    const t = (i / archPoints) * Math.PI; // 0 to PI

                    // Base curve math
                    const h = Math.sin(t) * archHeight;
                    const z_base = (t / Math.PI - 0.5) * archSpan;

                    // Tilt rotation
                    const y_base = h * Math.cos(tiltAngle);
                    const x_base = h * Math.sin(tiltAngle) + 40;

                    // Tapering Logic: Arch is thicker at base (h=0) and thinner at top (h=max)
                    // Base radius ~6, Top radius ~2.5
                    const taperFactor = 1 - (h / archHeight) * 0.6;
                    const trussRad = 6 * taperFactor;

                    // 1. Main Tube (Top) - High Density
                    if (i % 1 === 0) addP(x_base, y_base + 160 + trussRad, z_base, colWhite, 2);

                    // 2. Bottom Chords (Left/Right)
                    if (i % 1 === 0) {
                        addP(x_base, y_base + 160 - trussRad, z_base + trussRad, colWhite, 1.5);
                        addP(x_base, y_base + 160 - trussRad, z_base - trussRad, colWhite, 1.5);
                    }

                    // 3. Lattice Work (Zig-Zag / Cross Bracing)
                    // Much denser connection
                    if (i % 10 === 0) {
                        // Random strut connections between top and bottom chords
                        addP(x_base, y_base + 160 + (Math.random() - 0.5) * trussRad, z_base + (Math.random() - 0.5) * trussRad * 2, colWhite, 1);
                    }

                    // 4. Cables (Support stays) - Sophisticated array
                    if (i % 120 === 0 && h > 40) {
                        // Front cables (holding roof)
                        for (let k = 0; k < 40; k++) {
                            const ratio = k / 40;
                            const cableY = (y_base + 160) * (1 - ratio) + (roofHeight * ratio);
                            const cableX = x_base * (1 - ratio) + (roofW * 0.6) * ratio; // Angle to roof ring opacity
                            const cableZ = z_base; // Straight down Z-wise
                            if (cableY > roofHeight) addP(cableX, cableY, cableZ, colConcrete, 0.4);
                        }

                        // Back stays (holding arch)
                        if (h < 120) {
                            for (let k = 0; k < 25; k++) {
                                const ratio = k / 25;
                                const cableX = x_base * (1 - ratio) + (x_base + 80) * ratio; // Anchor further back
                                const cableY = (y_base + 160) * (1 - ratio);
                                addP(cableX, cableY, z_base, colConcrete, 0.4);
                            }
                        }
                    }
                }
            }

            // E. CITY BACKGROUND (Hazy Buildings & Landmarks)

            // Landmark Generation (London Bridge for Wembley)
            if (currentStadium.name === 'Wembley') {
                const bridgeColor = new THREE.Color('#555555');
                const bridgeDetail = new THREE.Color('#777777');

                // Bridge Towers location (Background left/right)
                const towers = [{ x: -400, z: -300 }, { x: -400, z: 100 }];

                towers.forEach(pos => {
                    // Main Tower Body
                    for (let i = 0; i < 800; i++) {
                        const x = pos.x + (Math.random() - 0.5) * 30;
                        const z = pos.z + (Math.random() - 0.5) * 30;
                        const y = Math.random() * 200; // Tower Height
                        addP(x, y, z, bridgeColor, 1.5);

                        // Detail lines (horizontal bands)
                        if (y > 100 && y < 110) addP(x, y, z, bridgeDetail, 2);
                        if (y > 180) addP(x, y, z, colWhite, 1); // Spire light
                    }

                    // Suspension Cables
                    for (let i = 0; i < 200; i++) {
                        const t = i / 200;
                        const x = pos.x;
                        // Cable to center
                        addP(x, 180 - t * 80, pos.z + t * 200 * (pos.z < 0 ? 1 : -1), bridgeDetail, 0.8);
                    }
                });

                // Walkways connecting towers
                for (let i = 0; i < 300; i++) {
                    const t = i / 300;
                    const z = -300 + t * 400; // Span between towers (-300 to 100)
                    addP(-400, 140, z, bridgeDetail, 1.2); // Upper walkway
                    addP(-400, 40, z, bridgeColor, 1.5); // Road level
                }
            }


            // Generic Cityscape (Dense & Tall - Maximized)
            for (let b = 0; b < 350; b++) { // Increased to 350
                const angle = Math.random() * Math.PI * 2;
                const dist = 400 + Math.random() * 900; // Closer start (400)
                const bx = Math.cos(angle) * dist;
                const bz = Math.sin(angle) * dist;

                const bw = 20 + Math.random() * 50;
                const bd = 20 + Math.random() * 50;
                const bh = 50 + Math.random() * 300; // Taller buildings

                const particlesInBlock = Math.floor(bh * 0.8); // Optimization: slightly less dense per building
                for (let p = 0; p < particlesInBlock; p++) {
                    const px = bx + (Math.random() - 0.5) * bw;
                    const pz = bz + (Math.random() - 0.5) * bd;
                    const py = Math.random() * bh;

                    let c = new THREE.Color('#1a1a1a');
                    if (Math.random() > 0.99) c = new THREE.Color('#555'); // Less lights

                    addP(px, py, pz, c, 1.8);
                }
            }

            stadiumGeo.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
            stadiumGeo.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
            stadiumGeo.setAttribute('size', new THREE.Float32BufferAttribute(sizes, 1));

            // Use global material
            const stadiumPoints = new THREE.Points(stadiumGeo, material.clone());
            stadiumGroup.add(stadiumPoints);
        } // End updateStadium

        // Initial Call
        updateStadium();

        // --- PARTICLE GENERATION: DNA HELIX ---
        const helixGeo = new THREE.BufferGeometry();
        const hPos = [];
        const hCol = [];
        const hSizes = [];
        const hCount = 80000;

        for (let i = 0; i < hCount; i++) {
            const t = Math.random() * 2000;
            const angle = t * 0.05 + (Math.floor(Math.random() * 2) * Math.PI);
            const radius = 60 + (Math.random() - 0.5) * 20;

            const x = Math.cos(angle) * radius;
            const z = Math.sin(angle) * radius;
            const ny = t - 1000;
            const scatter = Math.random() > 0.8 ? 50 : 5;

            hPos.push(x + (Math.random() - 0.5) * scatter, ny, z + (Math.random() - 0.5) * scatter);
            hCol.push(1, 1, 1);
            hSizes.push(Math.random() * 1.2);
        }
        helixGeo.setAttribute('position', new THREE.Float32BufferAttribute(hPos, 3));
        helixGeo.setAttribute('color', new THREE.Float32BufferAttribute(hCol, 3));
        helixGeo.setAttribute('size', new THREE.Float32BufferAttribute(hSizes, 1));

        const helixPoints = new THREE.Points(helixGeo, material.clone());
        helixGroup.add(helixPoints);


        // --- ANIMATION LOOP ---
        // Zoomed Out - Seeing top of Arch (Slightly Closer)
        camera.position.set(520, 320, 420);

        let mouseX = 0, mouseY = 0;
        window.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX / window.innerWidth - 0.5);
            mouseY = (e.clientY / window.innerHeight - 0.5);
        });

        // Helix Color Morphing
        let targetHelixColor = new THREE.Color("#ffffff");

        function tick() {
            // Stadium Rotation
            stadiumGroup.rotation.y += 0.0008;

            // Helix Rotation
            helixGroup.rotation.y -= 0.002;

            // Camera Interaction
            const targetX = 520 + mouseX * 200;
            const targetY = 320 + mouseY * 100;

            camera.position.x += (targetX - camera.position.x) * 0.02;
            camera.position.y += (targetY - camera.position.y) * 0.02;
            camera.lookAt(0, 0, 0);

            // Flow
            if (helixGroup.visible) {
                helixPoints.material.color.lerp(targetHelixColor, 0.05);
                helixGroup.position.y += 0.5;
                if (helixGroup.position.y > 200) helixGroup.position.y = 0;
            }

            // Weather Animation
            if (cloudsPoints) {
                const positions = cloudsPoints.geometry.attributes.position.array;
                for (let i = 0; i < positions.length; i += 3) {
                    positions[i] += 0.2; // drift X
                    if (positions[i] > 1000) positions[i] = -1000;
                }
                cloudsPoints.geometry.attributes.position.needsUpdate = true;
            }

            if (rainPoints) {
                const positions = rainPoints.geometry.attributes.position.array;
                const type = rainPoints.geometry.userData.type;
                const speed = type === 'snow' ? 1.5 : 8.0;

                for (let i = 1; i < positions.length; i += 3) {
                    positions[i] -= speed; // fall Y
                    if (positions[i] < 0) {
                        positions[i] = 600; // respawn at top
                        // Randomize X/Z slightly on respawn for variety
                        positions[i - 1] = (Math.random() - 0.5) * 1500;
                        positions[i + 1] = (Math.random() - 0.5) * 1500;
                    }

                    if (type === 'snow') {
                        positions[i - 1] += Math.sin(Date.now() * 0.001 + i) * 0.1; // wiggle X
                    }
                }
                rainPoints.geometry.attributes.position.needsUpdate = true;
            }

            renderer.render(scene, camera);
            requestAnimationFrame(tick);
        }
        tick();

        // --- GSAP SCROLL TRIGGERS ---

        // 1. Loading
        const tl = gsap.timeline();
        tl.to('.loader-bar', { height: '100%', duration: 1, ease: "power4.inOut" })
            .to('.counter', { textContent: 100, duration: 1, roundProps: "textContent" }, "<")
            .to('.loader-wrap', {
                y: '-100%', duration: 0.8, ease: "expo.inOut", onComplete: () => {
                    document.querySelector('.loader-wrap').style.display = 'none'; // Critical Scroll Fix
                }
            })
            .to('#webgl', { opacity: 1, duration: 1 })
            .to('.char', { y: 0, duration: 0.8, stagger: 0.02, ease: "power3.out" }, "-=0.5")
            .to('.hero-desc', { opacity: 1, duration: 1 }, "-=0.5")
            .to('.hero-tag', { opacity: 1, y: 0, duration: 1 }, "-=0.5");

        // 2. Scene Switch (Stadium -> Helix)
        ScrollTrigger.create({
            trigger: "#roadmap",
            start: "top center",
            end: "bottom center",
            onEnter: () => {
                gsap.to(stadiumGroup.scale, { x: 0.1, y: 0.1, z: 0.1, duration: 1.5, ease: "power2.inOut" });
                gsap.to(stadiumGroup.position, { y: -500, duration: 1.5 });
                gsap.to(stadiumGroup, { visible: false, delay: 1 });

                helixGroup.visible = true;
                helixGroup.scale.set(0.5, 0.5, 0.5);
                gsap.fromTo(helixGroup.scale, { x: 0.5, y: 0, z: 0.5 }, { x: 1, y: 1, z: 1, duration: 1.5 });
            },
            onLeaveBack: () => {
                stadiumGroup.visible = true;
                gsap.to(stadiumGroup.scale, { x: 1, y: 1, z: 1, duration: 1.5 });
                gsap.to(stadiumGroup.position, { y: 0, duration: 1.5 });

                gsap.to(helixGroup.scale, { x: 0, y: 0, z: 0, duration: 1 });
                helixGroup.visible = false;
            }
        });

        // 3. Carousel Logic (Pinned Timeline)
        const carouselCards = document.querySelectorAll('.carousel-card');
        const world = document.getElementById('carouselWorld');
        const cardSpacing = 500;
        const rotationStep = 50;

        // Initial setup
        carouselCards.forEach((card, i) => {
            gsap.set(card, {
                y: i * cardSpacing,
                rotationY: i * rotationStep,
                z: 400,
                transformOrigin: "center center -400px",
                opacity: 0,
                scale: 0.8,
                filter: "blur(8px)"
            });
        });

        // Main Pinned Timeline
        const carouselTl = gsap.timeline({
            scrollTrigger: {
                trigger: ".carousel-container",
                start: "top top", // Lock when top hits top
                end: "+=4000", // Scroll distance
                scrub: 1, // Smooth catchup
                pin: true,
                anticipatePin: 1
            }
        });

        // A. Move World (Linear)
        carouselTl.to(world, {
            y: - (carouselCards.length * cardSpacing) + 200,
            rotationY: - (carouselCards.length * rotationStep),
            ease: "none",
            duration: 10 // Normalized total duration
        }, 0);

        // B. Animate Cards (Staggered insertion)
        // Ensure the timing matches the world movement so cards appear as they rotate to front
        const fragment = 10 / carouselCards.length; // Approximate duration per card slice

        carouselCards.forEach((card, i) => {
            // "Enter" zone
            const startTime = i * fragment - 0.5; // Start slightly before

            // Fade In -> Active -> Fade Out
            // We use a sub-timeline for each card or insert Tweens

            // 1. Appear
            carouselTl.to(card, {
                opacity: 1, scale: 1, filter: "blur(0px)", duration: 1,
                onStart: () => targetHelixColor.set(card.getAttribute('data-color')),
                onReverseComplete: () => { if (i > 0) targetHelixColor.set(carouselCards[i - 1].getAttribute('data-color')) }
            }, Math.max(0, startTime));

            // 2. Disappear (after it passes view)
            carouselTl.to(card, {
                opacity: 0, scale: 0.8, filter: "blur(8px)", duration: 1
            }, Math.max(0, startTime) + 2.5); // Stay visible for ~2.5 duration units
        });

    </script>
</body>

</html>