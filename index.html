<html lang="en" class="lenis lenis-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIXUP ARENA | The Future of Competition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/geist-sans@5.0.1/300.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/geist-sans@5.0.1/400.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/geist-sans@5.0.1/500.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/geist-sans@5.0.1/600.min.css" rel="stylesheet">

    <style>
        :root {
            --cursor-size: 20px;
        }

        body {
            background-color: #050505;
            color: #ffffff;
            overflow-x: hidden;
            cursor: none;
            font-family: 'Geist Sans', sans-serif;
            margin: 0;
        }

        /* --- SMOOTH SCROLL --- */
        html.lenis {
            width: auto;
            min-height: 100%;
        }

        html.lenis,
        html.lenis body {
            height: auto;
        }

        .lenis.lenis-smooth {
            scroll-behavior: auto !important;
        }

        ::selection {
            background: #10b981;
            color: #fff;
        }

        /* --- GLASS MORPHISM --- */
        .glass-panel {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        /* --- 3D CANVAS --- */
        #webgl {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
            opacity: 0;
            pointer-events: none;
            background: radial-gradient(circle at 50% 50%, #111115 0%, #000000 100%);
        }

        /* --- CUSTOM CURSOR --- */
        #cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 12px;
            height: 12px;
            border: 1px solid white;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s, background 0.3s;
            mix-blend-mode: difference;
        }

        #cursor.hovered {
            width: 40px;
            height: 40px;
            background: rgba(16, 185, 129, 0.2);
            border-color: #10b981;
        }

        /* --- TYPOGRAPHY FX --- */
        .reveal-text {
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
        }

        .char {
            display: inline-block;
            transform: translateY(110%);
            will-change: transform;
        }

        /* --- CAROUSEL (SPIRAL) --- */
        .carousel-container {
            height: 400vh;
            /* Taller for smoother scroll */
            position: relative;
        }

        .carousel-viewport {
            position: sticky;
            top: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            perspective: 2000px;
            /* Deeper perspective */
        }

        .carousel-world {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            will-change: transform;
        }

        .carousel-card {
            position: absolute;
            left: 50%;
            top: 50%;
            width: 320px;
            height: 220px;
            margin-left: -160px;
            margin-top: -110px;
            transform-style: preserve-3d;
            backface-visibility: hidden;
            /* Clean up rendering */
        }

        /* --- LOADER --- */
        .loader-wrap {
            position: fixed;
            z-index: 10000;
            inset: 0;
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .loader-bar {
            width: 1px;
            height: 0%;
            background: #10b981;
            margin-bottom: 20px;
        }

        /* --- MARQUEE --- */
        .marquee-container {
            mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
            overflow: hidden;
            white-space: nowrap;
        }

        .marquee-content {
            display: inline-flex;
            animation: scroll 30s linear infinite;
        }

        .marquee-item {
            padding-right: 4rem;
        }

        @keyframes scroll {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }
    </style>
</head>

<body class="selection:bg-emerald-500/30 selection:text-white">

    <!-- Cursor -->
    <div id="cursor"></div>

    <!-- 3D Background -->
    <canvas id="webgl"></canvas>

    <!-- Loader -->
    <div class="loader-wrap">
        <div class="loader-bar"></div>
        <div class="flex gap-2 text-xs font-medium tracking-widest text-white uppercase">
            <span class="stadium-name-loader">LOADING</span>
            <span class="counter">0</span>%
        </div>
    </div>

    <!-- Nav -->
    <nav class="fixed top-0 left-0 w-full z-[100] flex justify-center pt-6 px-4 pointer-events-none">
        <div
            class="pointer-events-auto bg-black/80 backdrop-blur-xl border border-white/10 rounded-full px-6 h-16 flex items-center justify-between shadow-2xl min-w-[320px] md:min-w-[500px]">
            <a href="#founders"
                class="nav-link text-[11px] font-medium text-zinc-400 hover:text-white transition-colors uppercase tracking-widest hover-trigger">Contact</a>
            <a href="#"
                class="nav-link flex flex-col items-center justify-center group px-8 border-x border-white/10 h-full mx-6 hover-trigger">
                <div class="flex items-center gap-2">
                    <iconify-icon icon="lucide:trophy"
                        class="text-emerald-400 text-lg group-hover:rotate-12 transition-transform"></iconify-icon>
                    <span class="text-sm font-bold text-white tracking-tighter">FIXUP ARENA</span>
                </div>
            </a>
            <a href="#register"
                class="nav-link text-[11px] font-medium text-emerald-400 hover:text-emerald-300 transition-colors uppercase tracking-widest flex items-center gap-1 hover-trigger">
                Invest <iconify-icon icon="lucide:arrow-up-right"></iconify-icon>
            </a>
        </div>
    </nav>

    <!-- Hero -->
    <header class="h-screen relative flex items-center justify-center px-4 overflow-hidden">
        <div class="z-10 text-center flex flex-col items-center max-w-4xl mx-auto mt-12">

            <div class="mb-8 overflow-hidden">
                <div
                    class="hero-tag opacity-0 text-[10px] uppercase flex gap-2 font-medium text-amber-400 tracking-widest bg-amber-950/40 border border-amber-500/30 rounded-full px-4 py-1.5 backdrop-blur-md translate-y-full items-center shadow-lg shadow-amber-900/20">
                    <span class="w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"></span>
                    Project Status: Seeking Investment
                </div>
            </div>

            <h1
                class="font-display text-5xl md:text-8xl lg:text-9xl font-semibold leading-[0.9] tracking-tighter text-white text-center mb-8 mix-blend-overlay">
                <div class="reveal-text"><span class="char">The Future of</span></div>
                <div class="reveal-text"><span
                        class="char text-transparent bg-clip-text bg-gradient-to-b from-white to-zinc-400">Competition.</span>
                </div>
            </h1>

            <div class="max-w-xl text-center">
                <p
                    class="hero-desc opacity-0 text-sm md:text-base text-zinc-300 font-light leading-relaxed mix-blend-plus-lighter">
                    The world’s first central hub for all sports tournaments. We connect players, teams, and leagues
                    through intelligent automation.
                </p>
            </div>

            <div class="hero-desc opacity-0 mt-10">
                <button
                    class="hover-trigger px-8 py-3 bg-white text-black text-xs font-semibold uppercase tracking-wider rounded-lg hover:bg-zinc-200 transition-all shadow-[0_0_30px_rgba(255,255,255,0.2)] hover:scale-105">
                    Register Interest
                </button>
            </div>
        </div>

        <div class="absolute bottom-10 right-10 hidden md:block z-10">
            <div
                class="flex items-center gap-3 bg-black/60 backdrop-blur border border-white/10 rounded-full px-4 py-2 shadow-xl">
                <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                <div class="text-[10px] uppercase font-medium text-zinc-300 tracking-widest">
                    <span class="text-zinc-500 mr-2">Loc:</span>
                    <span id="stadium-label" class="text-white">...</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Marquee -->
    <section class="py-6 border-y border-white/5 bg-black/40 backdrop-blur-md marquee-container relative z-20">
        <div class="marquee-content">
            <!-- Set 1 -->
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-500 flex items-center gap-8">GRASSROOTS
                    REVOLUTION <iconify-icon icon="lucide:star" class="text-emerald-500"></iconify-icon></span></div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-300 flex items-center gap-8">LEAGUE
                    MANAGEMENT <iconify-icon icon="lucide:layout-grid" class="text-emerald-500"></iconify-icon></span>
            </div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-500 flex items-center gap-8">ADVANCED
                    STATISTICS <iconify-icon icon="lucide:bar-chart-2" class="text-emerald-500"></iconify-icon></span>
            </div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-300 flex items-center gap-8">GLOBAL
                    RANKINGS <iconify-icon icon="lucide:globe" class="text-emerald-500"></iconify-icon></span></div>
            <!-- Set 2 -->
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-500 flex items-center gap-8">GRASSROOTS
                    REVOLUTION <iconify-icon icon="lucide:star" class="text-emerald-500"></iconify-icon></span></div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-300 flex items-center gap-8">LEAGUE
                    MANAGEMENT <iconify-icon icon="lucide:layout-grid" class="text-emerald-500"></iconify-icon></span>
            </div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-500 flex items-center gap-8">ADVANCED
                    STATISTICS <iconify-icon icon="lucide:bar-chart-2" class="text-emerald-500"></iconify-icon></span>
            </div>
            <div class="marquee-item"><span class="text-lg font-medium text-zinc-300 flex items-center gap-8">GLOBAL
                    RANKINGS <iconify-icon icon="lucide:globe" class="text-emerald-500"></iconify-icon></span></div>
        </div>
    </section>

    <!-- Problem -->
    <section id="problem" class="relative py-32 px-4 z-10 bg-black/20">
        <div class="max-w-[1200px] mx-auto glass-panel p-8 md:p-12 lg:p-16 relative overflow-hidden">
            <div class="absolute -top-40 -right-40 w-80 h-80 bg-emerald-500/10 rounded-full blur-[100px]"></div>

            <div class="flex items-end justify-between mb-16 border-b border-white/5 pb-8 relative z-10">
                <h2 class="text-3xl md:text-5xl font-semibold tracking-tight text-white">PROBLEM STATEMENT</h2>
                <div class="text-right hidden md:block">
                    <p class="text-zinc-500 text-xs uppercase tracking-widest">Fragmented Scene.<br>Untapped Potential.
                    </p>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-12 relative z-10">
                <div class="space-y-12">
                    <div class="group">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-1.5 h-1.5 bg-red-500 rounded-full"></span>
                            <span class="text-[10px] font-bold text-red-500 uppercase tracking-widest">Current
                                State</span>
                        </div>
                        <h3 class="text-2xl font-medium text-white mb-4">Fragmented Ecosystem</h3>
                        <p class="text-zinc-400 font-light leading-relaxed text-sm md:text-base">
                            The amateur world is scattered. Dozens of small tournaments operate in silos with no central
                            system, no standardisation, and no digital bridge.
                        </p>
                    </div>
                    <div class="group">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-1.5 h-1.5 bg-amber-500 rounded-full"></span>
                            <span class="text-[10px] font-bold text-amber-500 uppercase tracking-widest">Lost
                                Value</span>
                        </div>
                        <h3 class="text-2xl font-medium text-white mb-4">No Stage, No Reward</h3>
                        <p class="text-zinc-400 font-light leading-relaxed text-sm md:text-base">
                            Even the best grassroots players rarely earn from their craft. They pour hours into training
                            but lack the infrastructure to turn skill into income.
                        </p>
                    </div>
                </div>

                <div
                    class="relative min-h-[400px] bg-black/50 rounded-xl overflow-hidden border border-white/5 flex items-center justify-center">
                    <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20">
                    </div>
                    <div class="relative w-full h-full p-8 flex items-center justify-center">
                        <div class="grid grid-cols-2 gap-4 w-64">
                            <div
                                class="h-24 border border-zinc-700 rounded-lg flex items-center justify-center bg-zinc-900/50 backdrop-blur">
                                <iconify-icon icon="lucide:x" class="text-red-500/50 text-2xl"></iconify-icon></div>
                            <div
                                class="h-24 border border-zinc-700 rounded-lg flex items-center justify-center bg-zinc-900/50 backdrop-blur">
                                <iconify-icon icon="lucide:x" class="text-red-500/50 text-2xl"></iconify-icon></div>
                            <div
                                class="h-24 border border-zinc-700 rounded-lg flex items-center justify-center bg-zinc-900/50 backdrop-blur">
                                <iconify-icon icon="lucide:x" class="text-red-500/50 text-2xl"></iconify-icon></div>
                            <div
                                class="h-24 border border-zinc-700 rounded-lg flex items-center justify-center bg-zinc-900/50 backdrop-blur">
                                <iconify-icon icon="lucide:x" class="text-red-500/50 text-2xl"></iconify-icon></div>
                        </div>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div
                                class="text-[10px] bg-red-500/10 text-red-400 px-3 py-1 rounded-full border border-red-500/20 backdrop-blur-md uppercase tracking-widest font-bold">
                                Disconnect</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Roadmap (Spiral) -->
    <section id="roadmap" class="carousel-container z-20">
        <div class="carousel-viewport bg-black/10">
            <div class="absolute top-24 left-0 w-full text-center z-20 pointer-events-none">
                <div class="inline-block bg-black/50 backdrop-blur px-6 py-2 rounded-full border border-white/10">
                    <h2 class="text-2xl font-semibold text-white tracking-tight">ROADMAP</h2>
                </div>
            </div>

            <div class="carousel-world" id="carouselWorld">
                <!-- Cards arranged in a downward spiral (Adjusted spacing and angles) -->

                <div class="carousel-card glass-panel p-6 flex flex-col justify-center border-l-4 border-emerald-500"
                    data-color="#10b981">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-emerald-500 text-[10px] font-bold tracking-widest uppercase">Q2 2026</span>
                        <iconify-icon icon="lucide:flag" class="text-zinc-500"></iconify-icon>
                    </div>
                    <h3 class="text-xl font-medium text-white mb-2">The Setup</h3>
                    <p class="text-zinc-400 font-light text-xs leading-relaxed">Partnerships secured. AI algorithms
                        finalized.</p>
                </div>

                <div class="carousel-card glass-panel p-6 flex flex-col justify-center border-l-4 border-blue-500"
                    data-color="#3b82f6">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-blue-500 text-[10px] font-bold tracking-widest uppercase">Q3 2026</span>
                        <iconify-icon icon="lucide:smartphone" class="text-zinc-500"></iconify-icon>
                    </div>
                    <h3 class="text-xl font-medium text-white mb-2">App Development</h3>
                    <p class="text-zinc-400 font-light text-xs leading-relaxed">MVP build. Players create profiles and
                        join waitlists.</p>
                </div>

                <div class="carousel-card glass-panel p-6 flex flex-col justify-center border-l-4 border-white bg-zinc-900"
                    data-color="#ffffff">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-white text-[10px] font-bold tracking-widest uppercase">Late 2026</span>
                        <iconify-icon icon="lucide:rocket" class="text-white"></iconify-icon>
                    </div>
                    <h3 class="text-xl font-medium text-white mb-2">UK Launch</h3>
                    <p class="text-zinc-400 font-light text-xs leading-relaxed">Official launch. £15k prize pool. Live
                        streaming.</p>
                </div>

                <div class="carousel-card glass-panel p-6 flex flex-col justify-center border-l-4 border-amber-500"
                    data-color="#f59e0b">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-amber-500 text-[10px] font-bold tracking-widest uppercase">Q1 2027</span>
                        <iconify-icon icon="lucide:map" class="text-zinc-500"></iconify-icon>
                    </div>
                    <h3 class="text-xl font-medium text-white mb-2">Expansion</h3>
                    <p class="text-zinc-400 font-light text-xs leading-relaxed">7-a-side leagues with
                        promotion/relegation systems.</p>
                </div>

                <div class="carousel-card glass-panel p-6 flex flex-col justify-center border-l-4 border-purple-500"
                    data-color="#a855f7">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-purple-500 text-[10px] font-bold tracking-widest uppercase">Q3 2027</span>
                        <iconify-icon icon="lucide:globe-2" class="text-zinc-500"></iconify-icon>
                    </div>
                    <h3 class="text-xl font-medium text-white mb-2">Global Sport</h3>
                    <p class="text-zinc-400 font-light text-xs leading-relaxed">Basketball and Tennis integration.</p>
                </div>
            </div>
        </div>
    </section>

    <div class="h-[10vh]"></div>

    <!-- Founders -->
    <section id="founders" class="py-32 px-4 relative z-10 bg-black">
        <div class="max-w-[1200px] mx-auto glass-panel p-8 md:p-16 border-t border-white/10">
            <h2 class="text-3xl font-semibold text-white tracking-tight text-center mb-16" style="">FOUNDERS</h2>

            <div class="grid md:grid-cols-2 gap-8">
                <!-- Founder 1 -->
                <div
                    class="p-8 rounded-2xl bg-zinc-900/50 border border-white/5 hover:bg-zinc-800/50 transition-colors group hover-trigger">
                    <div class="flex items-center gap-4 mb-6">
                        <div
                            class="w-14 h-14 bg-gradient-to-br from-zinc-700 to-black rounded-full flex items-center justify-center border border-white/10 shadow-lg">
                            <span class="text-white font-bold text-lg">HK</span>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-white group-hover:text-emerald-400 transition-colors">
                                Hassan Kone</h3>
                            <p class="text-zinc-500 text-[10px] font-bold uppercase tracking-wider">Co-Founder &amp; CMO
                            </p>
                        </div>
                    </div>
                    <ul class="space-y-3">
                        <li class="flex items-start gap-3 text-sm text-zinc-400 font-light">
                            <iconify-icon icon="lucide:check-circle-2"
                                class="text-emerald-500 mt-0.5 text-base"></iconify-icon>
                            Sports Content Creator (500k+ followers)
                        </li>
                        <li class="flex items-start gap-3 text-sm text-zinc-400 font-light">
                            <iconify-icon icon="lucide:check-circle-2"
                                class="text-emerald-500 mt-0.5 text-base"></iconify-icon>
                            Marketing Lead experience at Accenture
                        </li>
                    </ul>
                </div>

                <!-- Founder 2 -->
                <div
                    class="p-8 rounded-2xl bg-zinc-900/50 border border-white/5 hover:bg-zinc-800/50 transition-colors group hover-trigger">
                    <div class="flex items-center gap-4 mb-6">
                        <div
                            class="w-14 h-14 bg-gradient-to-br from-zinc-700 to-black rounded-full flex items-center justify-center border border-white/10 shadow-lg">
                            <span class="text-white font-bold text-lg">PK</span>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-white group-hover:text-emerald-400 transition-colors">
                                Praveet Khambhaita</h3>
                            <p class="text-zinc-500 text-[10px] font-bold uppercase tracking-wider">Co-Founder &amp; CTO
                            </p>
                        </div>
                    </div>
                    <ul class="space-y-3">
                        <li class="flex items-start gap-3 text-sm text-zinc-400 font-light">
                            <iconify-icon icon="lucide:check-circle-2"
                                class="text-emerald-500 mt-0.5 text-base"></iconify-icon>
                            AI Lead experience at Accenture
                        </li>
                        <li class="flex items-start gap-3 text-sm text-zinc-400 font-light">
                            <iconify-icon icon="lucide:check-circle-2"
                                class="text-emerald-500 mt-0.5 text-base"></iconify-icon>
                            Building GenAI copilots (30–60% efficiency)
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black pt-20 pb-12 px-6 border-t border-white/10 relative z-20">
        <div class="max-w-[1400px] mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-start gap-12 mb-12">
                <div>
                    <div class="flex items-center gap-2 mb-4">
                        <iconify-icon icon="lucide:trophy" class="text-emerald-500 text-xl"></iconify-icon>
                        <span class="text-xl font-bold tracking-tight text-white">FIXUP ARENA</span>
                    </div>
                    <p class="text-zinc-500 text-sm max-w-xs font-light">
                        Democratising sports competition through AI-driven league management.
                    </p>
                </div>

                <div>
                    <h4 class="text-white text-xs font-bold uppercase tracking-widest mb-4">Company</h4>
                    <ul class="space-y-2 text-sm text-zinc-500">
                        <li><a href="#" class="hover:text-emerald-400 transition-colors">About</a></li>
                        <li><a href="#" class="hover:text-emerald-400 transition-colors">Founders</a></li>

                    </ul>
                </div>
            </div>

            <div class="pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="text-[10px] text-zinc-600 uppercase tracking-wider">
                    © 2026 FixUp Arena Ltd. All Rights Reserved.
                </div>
                <div class="flex gap-4">
                    <a href="#" class="text-zinc-600 hover:text-white transition-colors"><iconify-icon
                            icon="lucide:twitter"></iconify-icon></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // --- 1. CONFIG & DATA ---
        // Enhanced Stadium Definitions
        const stadiums = {
            'wembley': { name: "Wembley", colorPrimary: "#e2e8f0", colorSecondary: "#ef4444", type: "oval", arch: true, seats: 50000 },
            'etihad': { name: "Etihad Stadium", colorPrimary: "#6CABDD", colorSecondary: "#1e3a8a", type: "bowl", seats: 45000 },
            'emirates': { name: "Emirates Stadium", colorPrimary: "#EF0107", colorSecondary: "#ffffff", type: "bowl-curved", seats: 48000 },
            'old_trafford': { name: "Old Trafford", colorPrimary: "#DA291C", colorSecondary: "#000000", type: "rect-steep", seats: 55000 },
            'anfield': { name: "Anfield", colorPrimary: "#C8102E", colorSecondary: "#F6EB61", type: "rect-kop", seats: 45000 },
        };

        const stadiumKeys = Object.keys(stadiums);
        const currentKey = stadiumKeys[Math.floor(Math.random() * stadiumKeys.length)];
        const currentStadium = stadiums[currentKey];

        document.getElementById('stadium-label').textContent = currentStadium.name;
        document.querySelector('.stadium-name-loader').textContent = currentStadium.name.toUpperCase();

        // --- 2. CUSTOM CURSOR ---
        const cursor = document.getElementById('cursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });
        document.querySelectorAll('.hover-trigger, a, button').forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
        });

        // --- 3. LENIS ---
        const lenis = new Lenis({ duration: 1.2, smooth: true });
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);

        // --- 4. THREE.JS ENGINE ---
        const canvas = document.querySelector('#webgl');
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(new THREE.Color('#000000'), 0.002);

        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 5000);
        const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: false, powerPreference: "high-performance" });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5)); // Optimization

        // GROUPS
        const stadiumGroup = new THREE.Group();
        const helixGroup = new THREE.Group();
        scene.add(stadiumGroup);
        scene.add(helixGroup);
        helixGroup.visible = false;

        // --- PARTICLE GENERATION: HIGH FIDELITY STADIUM ---
        const geometry = new THREE.BufferGeometry();
        const positions = [];
        const colors = [];
        const sizes = [];

        const addP = (x, y, z, c, s = 1) => {
            positions.push(x, y, z);
            colors.push(c.r, c.g, c.b);
            sizes.push(s);
        }

        const colPrim = new THREE.Color(currentStadium.colorPrimary);
        const colSec = new THREE.Color(currentStadium.colorSecondary);
        const colConcrete = new THREE.Color('#333');
        const colPitchDark = new THREE.Color('#064e3b');
        const colPitchLight = new THREE.Color('#10b981');
        const colWhite = new THREE.Color('#ffffff');

        // A. PITCH (High density, mowing patterns)
        const pw = 45, pl = 68;
        for (let i = 0; i < 15000; i++) {
            const x = (Math.random() - 0.5) * pw * 2;
            const z = (Math.random() - 0.5) * pl * 2;

            // Boundary checks
            if (currentStadium.type.includes('oval') && (x * x / (pw * pw) + z * z / (pl * pl) > 1)) continue;

            // Mowing stripes logic
            const stripe = Math.floor((z + pl) / 10) % 2 === 0;
            const c = stripe ? colPitchDark : colPitchLight;
            // Add noise to color
            c.offsetHSL(0, 0, (Math.random() - 0.5) * 0.05);

            addP(x, 0, z, c, 0.6);

            // White Lines
            if (Math.abs(x) > pw - 1 || Math.abs(z) > pl - 1 || Math.abs(z) < 0.5 || (x * x + z * z < 100 && x * x + z * z > 80)) {
                addP(x, 0.1, z, colWhite, 0.8);
            }
        }

        // B. STANDS & ARCHITECTURE
        const tiers = 70;
        const seatsPerTier = 800;

        for (let t = 0; t < tiers; t++) {
            let y, spread;

            // Tier Logic (Lower vs Upper)
            if (t < 30) {
                y = t * 1.5;
                spread = t * 1.8;
            } else {
                // Upper Tier Gap
                y = (t * 1.8) + 10;
                spread = t * 2.2;
            }

            for (let i = 0; i < seatsPerTier; i++) {
                const angle = (i / seatsPerTier) * Math.PI * 2;
                let x, z;
                let valid = true;

                // Geometry Shapes
                if (currentStadium.type === 'rect-steep') {
                    // Rectangular with steep sides (Old Trafford style)
                    const w = pw + 12 + spread;
                    const l = pl + 12 + spread;
                    // Superellipse
                    x = Math.pow(Math.abs(Math.cos(angle)), 0.3) * w * Math.sign(Math.cos(angle));
                    z = Math.pow(Math.abs(Math.sin(angle)), 0.3) * l * Math.sign(Math.sin(angle));

                    // Corner gaps for steepness
                    if (Math.abs(Math.sin(angle * 2)) > 0.9 && t > 20) valid = false;

                } else if (currentStadium.type === 'rect-kop') {
                    // One massive stand (Anfield Kop)
                    const w = pw + 10 + spread;
                    const l = pl + 10 + spread;
                    x = Math.cos(angle) * w;
                    z = Math.sin(angle) * l;

                    // Flatten sides
                    if (Math.abs(Math.cos(angle)) > 0.5) x *= 1.2;
                    if (Math.abs(Math.sin(angle)) > 0.5) z *= 1.2;

                    // The Kop End (High Z)
                    if (z > pl + 20 && t > 40) y += (z - (pl + 20)) * 0.5;

                } else if (currentStadium.type === 'bowl-curved') {
                    // Emirates style smooth bowl
                    const w = pw + 15 + spread;
                    const l = pl + 15 + spread;
                    x = Math.cos(angle) * w;
                    z = Math.sin(angle) * l;
                    y = t * 1.2 + Math.sin(angle * 2) * 5; // Wavy top

                } else {
                    // Oval (Wembley)
                    const w = pw + 15 + spread;
                    const l = pl + 15 + spread * 1.1;
                    x = Math.cos(angle) * w;
                    z = Math.sin(angle) * l;
                }

                if (!valid) continue;

                // Coloring
                let c = colPrim;
                if (Math.random() > 0.8) c = colSec; // Scattered seats
                if (i % 40 === 0) c = colConcrete; // Aisles
                if (t % 35 === 0) c = colConcrete; // Walkways

                addP(x, y + Math.random() * 0.5, z, c, 1.2);
            }
        }

        // C. ROOF STRUCTURE & DETAILS
        // Ring of lights/roof
        const roofHeight = 160;
        const roofW = pw + 130;
        const roofL = pl + 140;

        for (let i = 0; i < 3000; i++) {
            const angle = (i / 3000) * Math.PI * 2;
            const x = Math.cos(angle) * roofW;
            const z = Math.sin(angle) * roofL;

            // Roof edge
            addP(x, roofHeight, z, colWhite, 2);

            // Trusses connecting down
            if (i % 100 === 0) {
                for (let k = 0; k < 20; k++) {
                    const ty = roofHeight - (k * (roofHeight / 20));
                    const tx = x * (0.8 + k * 0.01);
                    const tz = z * (0.8 + k * 0.01);
                    addP(tx, ty, tz, colConcrete, 0.8);
                }
            }
        }

        // D. WEMBLEY ARCH (Specific)
        if (currentStadium.arch) {
            for (let i = 0; i < 4000; i++) {
                const pct = i / 4000;
                const span = 280;
                const x = (pct - 0.5) * span;
                const h = 180 * (1 - Math.pow((pct - 0.5) * 2, 2)); // Parabola
                const z = -80 + Math.cos(pct * Math.PI) * 30; // Tilt

                // Thickness
                for (let k = 0; k < 5; k++) {
                    addP(x + Math.random(), h + Math.random(), z + Math.random(), colWhite, 1.5);
                }
            }
        }

        // E. CITY BACKGROUND (Denser, further out)
        for (let i = 0; i < 50000; i++) {
            const dist = 400 + Math.random() * 800;
            const theta = Math.random() * Math.PI * 2;
            const x = Math.cos(theta) * dist;
            const z = Math.sin(theta) * dist;
            const y = Math.random() * 100 * Math.random(); // Skyline variation

            let c = new THREE.Color('#111');
            if (Math.random() > 0.99) c = new THREE.Color('#ffffff'); // Lights

            addP(x, y, z, c, 1);
        }

        geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
        geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
        geometry.setAttribute('size', new THREE.Float32BufferAttribute(sizes, 1));

        const material = new THREE.PointsMaterial({
            size: 0.5, vertexColors: true, sizeAttenuation: true,
            transparent: true, opacity: 0.8, blending: THREE.AdditiveBlending, depthWrite: false
        });
        const stadiumPoints = new THREE.Points(geometry, material);
        stadiumGroup.add(stadiumPoints);


        // --- PARTICLE GENERATION: DNA HELIX ---
        const helixGeo = new THREE.BufferGeometry();
        const hPos = [];
        const hCol = [];
        const hSizes = [];
        const hCount = 80000;

        for (let i = 0; i < hCount; i++) {
            const t = Math.random() * 2000;
            const angle = t * 0.05 + (Math.floor(Math.random() * 2) * Math.PI);
            const radius = 60 + (Math.random() - 0.5) * 20;

            const x = Math.cos(angle) * radius;
            const z = Math.sin(angle) * radius;
            const ny = t - 1000;

            // Add some "mist" around it
            const scatter = Math.random() > 0.8 ? 50 : 5;

            hPos.push(x + (Math.random() - 0.5) * scatter, ny, z + (Math.random() - 0.5) * scatter);
            hCol.push(1, 1, 1);
            hSizes.push(Math.random() * 1.2);
        }
        helixGeo.setAttribute('position', new THREE.Float32BufferAttribute(hPos, 3));
        helixGeo.setAttribute('color', new THREE.Float32BufferAttribute(hCol, 3));
        helixGeo.setAttribute('size', new THREE.Float32BufferAttribute(hSizes, 1));

        const helixPoints = new THREE.Points(helixGeo, material.clone());
        helixGroup.add(helixPoints);


        // --- ANIMATION LOOP ---
        camera.position.set(0, 200, 350); // Higher starting view

        let mouseX = 0, mouseY = 0;
        window.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX / window.innerWidth - 0.5);
            mouseY = (e.clientY / window.innerHeight - 0.5);
        });

        // Helix Color Morphing
        let targetHelixColor = new THREE.Color("#ffffff");

        function tick() {
            // Stadium Rotation
            stadiumGroup.rotation.y += 0.0008;

            // Helix Rotation
            helixGroup.rotation.y -= 0.002;

            // Camera Interaction
            camera.position.x += (mouseX * 100 - camera.position.x) * 0.02;
            camera.position.y += (200 + mouseY * 50 - camera.position.y) * 0.02;
            camera.lookAt(0, 0, 0);

            // Flow
            if (helixGroup.visible) {
                helixPoints.material.color.lerp(targetHelixColor, 0.05);
                helixGroup.position.y += 0.5;
                if (helixGroup.position.y > 200) helixGroup.position.y = 0;
            }

            renderer.render(scene, camera);
            requestAnimationFrame(tick);
        }
        tick();

        // --- GSAP SCROLL TRIGGERS ---

        // 1. Loading
        const tl = gsap.timeline();
        tl.to('.loader-bar', { height: '100%', duration: 1, ease: "power4.inOut" })
            .to('.counter', { textContent: 100, duration: 1, roundProps: "textContent" }, "<")
            .to('.loader-wrap', { y: '-100%', duration: 0.8, ease: "expo.inOut" })
            .to('#webgl', { opacity: 1, duration: 1 })
            .to('.char', { y: 0, duration: 0.8, stagger: 0.02, ease: "power3.out" }, "-=0.5")
            .to('.hero-desc', { opacity: 1, duration: 1 }, "-=0.5")
            .to('.hero-tag', { opacity: 1, y: 0, duration: 1 }, "-=0.5");

        // 2. Scene Switch (Stadium -> Helix)
        ScrollTrigger.create({
            trigger: "#roadmap",
            start: "top center",
            end: "bottom center",
            onEnter: () => {
                gsap.to(stadiumGroup.scale, { x: 0.1, y: 0.1, z: 0.1, duration: 1.5, ease: "power2.inOut" });
                gsap.to(stadiumGroup.position, { y: -500, duration: 1.5 });
                gsap.to(stadiumGroup, { visible: false, delay: 1 });

                helixGroup.visible = true;
                helixGroup.scale.set(0.5, 0.5, 0.5);
                gsap.fromTo(helixGroup.scale, { x: 0.5, y: 0, z: 0.5 }, { x: 1, y: 1, z: 1, duration: 1.5 });
            },
            onLeaveBack: () => {
                stadiumGroup.visible = true;
                gsap.to(stadiumGroup.scale, { x: 1, y: 1, z: 1, duration: 1.5 });
                gsap.to(stadiumGroup.position, { y: 0, duration: 1.5 });

                gsap.to(helixGroup.scale, { x: 0, y: 0, z: 0, duration: 1 });
                helixGroup.visible = false;
            }
        });

        // 3. Carousel Logic (Fixed)
        const carouselCards = document.querySelectorAll('.carousel-card');
        const world = document.getElementById('carouselWorld');
        const cardSpacing = 400; // Increased spacing
        const rotationStep = 60; // Gentler rotation

        // Initial setup for cards
        carouselCards.forEach((card, i) => {
            gsap.set(card, {
                y: i * cardSpacing,
                rotationY: i * rotationStep,
                z: 400, // Push out from center
                transformOrigin: "center center -400px" // Rotate around center axis
            });

            // Color change trigger
            ScrollTrigger.create({
                trigger: ".carousel-container",
                start: () => `top+=${i * (window.innerHeight * 0.4)} top`,
                end: () => `top+=${(i + 1) * (window.innerHeight * 0.4)} top`,
                onEnter: () => {
                    gsap.to(card, { opacity: 1, scale: 1, filter: "blur(0px)" });
                    targetHelixColor.set(card.getAttribute('data-color'));
                },
                onLeave: () => gsap.to(card, { opacity: 0.2, scale: 0.8, filter: "blur(4px)" }),
                onEnterBack: () => {
                    gsap.to(card, { opacity: 1, scale: 1, filter: "blur(0px)" });
                    targetHelixColor.set(card.getAttribute('data-color'));
                },
                onLeaveBack: () => gsap.to(card, { opacity: 0.2, scale: 0.8, filter: "blur(4px)" })
            });
        });

        // The World Rotation/Movement
        gsap.to(world, {
            y: - (carouselCards.length * cardSpacing) + 200,
            rotationY: - (carouselCards.length * rotationStep),
            ease: "none",
            scrollTrigger: {
                trigger: ".carousel-container",
                start: "top top",
                end: "bottom bottom",
                scrub: 0.5
            }
        });

    </script>
</body>

</html>